@PART[OnionNew]:NEEDS[FeatureHabitat]:AFTER[Kerbalism]
{
	@MODULE[Habitat]
	{
		volume = 3.30
		surface = 6.87
	}
}

@PART[OnionNew2|HGRCFOnionProgress]:NEEDS[FeatureHabitat]:AFTER[Kerbalism]
{
	@MODULE[Habitat]
	{
		volume = 2.50
		surface = 5.29
	}
}

@PART[HGRCFOnionProgress]:NEEDS[Kerbalism,ProfileDefault]:FOR[Kerbalism]
{
  @mass = 0.5
  %ContainerVolume = 800
  %PressurizedTankVolume = 84.431
  MODULE
  {
    name = Configure
    title = Supply Container
    slots = 1

    SETUP
    {
      name = Supplies
      desc = Store a balanced supply of <b>Food</b> and <b>Water</b>.

      RESOURCE
      {
        name = Food
        amount = 0.7224224
        maxAmount = 0.7224224
        @amount *= #$../../../ContainerVolume$
        @maxAmount *= #$../../../ContainerVolume$
      }

      RESOURCE
      {
        name = Water
        amount = 0.2775776
        maxAmount = 0.2775776
        @amount *= #$../../../ContainerVolume$
        @maxAmount *= #$../../../ContainerVolume$
      }
    }

    SETUP
    {
      name = Waste
      desc = Store solid and liquid organic waste.

      RESOURCE
      {
        name = Waste
        amount = 0
        maxAmount = 0.4949706
        @amount *= #$../../../ContainerVolume$
        @maxAmount *= #$../../../ContainerVolume$
      }

      RESOURCE
      {
        name = WasteWater
        amount = 0
        maxAmount = 0.5050294
        @amount *= #$../../../ContainerVolume$
        @maxAmount *= #$../../../ContainerVolume$
      }
    }

    SETUP
    {
      name = Food

      RESOURCE
      {
        name = Food
        amount = 1
        maxAmount = 1
        @amount *= #$../../../ContainerVolume$
        @maxAmount *= #$../../../ContainerVolume$
      }
    }

    SETUP
    {
      name = Water

      RESOURCE
      {
        name = Water
        amount = 0.5
        maxAmount = 0.5
        @amount *= #$../../../ContainerVolume$
        @maxAmount *= #$../../../ContainerVolume$
      }
    }
  }
  MODULE
  {
    name = Configure
    title = Pressurized Tank
    slots = 1

    SETUP
    {
      name = Oxygen
      desc = Store liquid oxygen

      RESOURCE
      {
        name = Oxygen
        amount = 809.22
        maxAmount = 809.22
        @amount *= #$../../../PressurizedTankVolume$
        @maxAmount *= #$../../../PressurizedTankVolume$
      }
    }

    SETUP
    {
      name = Nitrogen
      desc = Store liquid nitrogen

      RESOURCE
      {
        name = Nitrogen
        amount = 659.4
        maxAmount = 659.4
        @amount *= #$../../../PressurizedTankVolume$
        @maxAmount *= #$../../../PressurizedTankVolume$
      }
    }

    SETUP
    {
      name = Ammonia
      desc = Store liquid ammonia

      RESOURCE
      {
        name = Ammonia
        amount = 913.0
        maxAmount = 913.0
        @amount *= #$../../../PressurizedTankVolume$
        @maxAmount *= #$../../../PressurizedTankVolume$
      }
    }

    SETUP
    {
      name = CarbonDioxide
      desc = Store liquid carbon dioxide

      RESOURCE
      {
        name = CarbonDioxide
        amount = 0
        maxAmount = 601.36
        @amount *= #$../../../PressurizedTankVolume$
        @maxAmount *= #$../../../PressurizedTankVolume$
      }
    }
  }
  
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = 2
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _PressureControl
    title = Pressure control
    capacity = 2
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _WaterRecycler
    title = Water recycler
    capacity = 2
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _WasteProcessor
    title = Waste processor
    capacity = 2
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _MonopropFuelCell
    title = Monoprop fuel cell
    capacity = 2
    running = false
  }

  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }

  MODULE
  {
    name = Configure
    title = Habitat
    slots = 2

    SETUP
    {
      name = Scrubber
      desc = A dual-bed vacuum-exposing regenerative scrubber that sequester <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.01
      cost = 250

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

    SETUP
    {
      name = Pressure Control
      desc = Use <b>Nitrogen</b> to maintain the internal atmosphere at a comfortable pressure.
      tech = engineering101
      mass = 0.01
      cost = 250

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _PressureControl
      }

      RESOURCE
      {
        name = Nitrogen
        amount = 4000
        maxAmount = 4000
      }
    }

    SETUP
    {
      name = Water Recycler
      desc = Filter impurities out of <b>WasteWater</b>.
      tech = spaceExploration
      mass = 0.05
      cost = 500


      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _WaterRecycler
      }

      RESOURCE
      {
        name = WasteWater
        amount = 0
        maxAmount = 5
      }
    }

    SETUP
    {
      name = Waste Processor
      desc = Extract <b>Ammonia</b> out of decomposing organic <b>Waste</b>.
      tech = advExploration
      mass = 0.05
      cost = 500

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _WasteProcessor
      }

      RESOURCE
      {
        name = Waste
        amount = 0
        maxAmount = 5
      }
    }

    SETUP
    {
      name = Monoprop Fuel Cell
      desc = An emergency fuel cell that burn <b>MonoPropellant</b>. Produce <b>Water</b> and <b>Nitrogen</b> as by-products.
      tech = advElectrics
      mass = 0.1
      cost = 1000

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _MonopropFuelCell
      }
    }
  }
}


@PART[Soy-Green]:NEEDS[FeatureHabitat]:AFTER[Kerbalism]
{
	@MODULE[Habitat]
	{
		volume = 1.79
		surface = 4.96
	}
}

@PART[Soy-Juice]:NEEDS[FeatureHabitat]:AFTER[Kerbalism]
{
	@MODULE[Habitat]
	{
		volume = 2.31
		surface = 6.44
	}
}

@PART[HGR_Leek]:NEEDS[FeatureHabitat]:AFTER[Kerbalism]
{
	@MODULE[Habitat]
	{
		volume = 3.61
		surface = 7.47
	}
}

@PART[Radish]:NEEDS[FeatureHabitat]:AFTER[Kerbalism]
{
	@MODULE[Habitat]
	{
		volume = 1.32
		surface = 4.46
	}
}

@PART[PumpkinLanderCabin]:NEEDS[FeatureHabitat]:AFTER[Kerbalism]
{
	@MODULE[Habitat]
	{
		volume = 3.04
		surface = 7.46
	}
}

@PART[Spud]:NEEDS[FeatureHabitat]:AFTER[Kerbalism]
{
	@MODULE[Habitat]
	{
		volume = 0.83
		surface = 3.53
	}
}

@PART[Soy-Juice]:NEEDS[Kerbalism]:AFTER[Kerbalism]
{
  @description = The Soy-Juice system was developed as a reliable low cost solution to delivering Kerbals to orbit. That'll show those wasteful Rockomax lovers!\n<i>This is low-orbit pod configuration. Life support systems must be provided by an orbital module.</i> 
  
  !MODULE[ProcessController]:HAS[!#resource[_PressureControl]],* {}

  !MODULE[Configure],* {}
  
  %RESOURCE[Nitrogen]
  {
    %amount = 300
    %maxAmount = 300
  }
}

@PART[HGR_Leek]:NEEDS[Kerbalism]:AFTER[Kerbalism]
{
  @MODULE[ProcessController],*
  {
    @capacity *= 2
  }
  %RESOURCE[Food]
  {
    amount = 31.491405
    maxAmount = 31.491405
  }
  %RESOURCE[Water]
  {
    amount = 12.1
    maxAmount = 12.1
  }
  %RESOURCE[Oxygen]
  {
    amount = 2978.7
    maxAmount = 2978.7
  }
}

@PART[OnionNew]:NEEDS[Kerbalism]:AFTER[Kerbalism]
{
  @MODULE[ProcessController],*
  {
    @capacity *= 2
  }
  %RESOURCE[Food]
  {
    amount = 94.474215
    maxAmount = 94.474215
  }
  %RESOURCE[Water]
  {
    amount = 36.3
    maxAmount = 36.3
  }
  %RESOURCE[Oxygen]
  {
    amount = 8936.1
    maxAmount = 8936.1
  }
}

@PART[OnionNew2]:NEEDS[Kerbalism]:AFTER[Kerbalism]
{
  %RESOURCE[Food]
  {
    amount = 62.98281
    maxAmount = 62.98281
  }
  %RESOURCE[Water]
  {
    amount = 24.2
    maxAmount = 24.2
  }
  %RESOURCE[Oxygen]
  {
    amount = 5957.4
    maxAmount = 5957.4
  }
}
